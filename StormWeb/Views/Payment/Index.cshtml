@model IEnumerable<StormWeb.Models.Application>
@{
    ViewBag.Title = "ShowApplications";
}
<p>
</p>

<script>
$(function () {
    $('.my-data-tbl-boxy').dataTable({
        "sPaginationType": "full_numbers",
        "aoColumnDefs": [
						{ "bSortable": false, "aTargets": [ 1,2,3,4,5 ] }
					],
        "iDisplayLength": 10,
        "oLanguage": {
            "sLengthMenu": "<span class='lenghtMenu'> _MENU_</span><span class='lengthLabel'>Entries per page:</span>",
        },
        "sDom": '<"tbl-searchbox clearfix"fl<"clear">>,<"table_content"t>,<"widget-bottom"p<"clear">>'

    });
    $("div.tbl-searchbox select").addClass('tbl_length');
/*$(".tbl_length").chosen({
		disable_search_threshold: 4	
	});
		*/

});
</script>

    <div class="row-fluid">
        <div class="span12">
            <div class="box-tab">
                <div class="page-header">
                    <h1>
                        &nbsp;&nbsp;Your counsellor: @ViewBag.StaffName
                        <small><b>Contact</b>: @ViewBag.StaffContactNumber | <b>Email</b>: @ViewBag.StaffEmail
                            | </small><small><b>Address</b>: @ViewBag.BranchAddress</small>
                    </h1>
                </div>
                <div class="tabbable">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#tab1" data-toggle="tab">Unpaid Applications</a></li>
                        <li class=""><a href="#tab2" data-toggle="tab">Paid Applications</a></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab1">
                            <div class="widget-content">
                                <div class="widget-box">
                                    <table class="mydata-tbl-inbox table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>
                                                    &nbsp;Branch Name
                                                </th>
                                                <th>
                                                    &nbsp;Appointment Date & Time
                                                </th>
                                                <th>
                                                    &nbsp;Confirmation<span class="color-icons help_co tip-right" data-original-title="WAITING FOR CONFIRMATION - Counselor will get in touch with you to confirm appointment<br/>CONFIRMED - Appointment has been confirmed for the booked date and time"></span>
                                                </th>
                                                <th>
                                                    &nbsp;Comments
                                                </th>
                                                <th>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.studentAppointments)
                                            {
                                                if (item.AppDateTime > DateTime.Now)
                                                {
                                                <tr>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Branch.Branch_Name)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.AppDateTime)
                                                    </td>
                                                    <td>
                                                        @if (item.Confirmation == "Request for Approval")
                                                        {
                                                            <text>Waiting for Confirmation&nbsp;</text>
                                                        }
                                                        else
                                                        {
                                                            @Html.DisplayFor(modelItem => item.Confirmation)
                                                        }
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Comments)
                                                    </td>
                                                    <td>
                                                        @Html.ActionLink("Details", "Details", new { id = item.Appointment_Id })
                                                    </td>
                                                </tr>
                                                }
                                                else
                                                    if (item.AppDateTime < DateTime.Now && item.Confirmation == "Request for Approval")
                                                    {
                                                <tr>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Branch.Branch_Name)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.AppDateTime)
                                                    </td>
                                                    <td>
                                                        @if (item.Confirmation == "Request for Approval")
                                                        {
                                                            <text>Waiting for Confirmation&nbsp;</text>
                                                        }
                                                        else
                                                        {
                                                            @Html.DisplayFor(modelItem => item.Confirmation)
                                                        }
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Comments)
                                                    </td>
                                                    <td>
                                                        @Html.ActionLink("Details", "Details", new { id = item.Appointment_Id })
                                                    </td>
                                                </tr>
                                                    }
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab2">
                            <div class="widget-content">
                                <div class="widget-box">
                                    <table class="mydata-tbl-inbox table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>
                                                    &nbsp;Branch_Name
                                                </th>
                                                <th>
                                                    &nbsp;AppDateTime
                                                </th>
                                                <th>
                                                    &nbsp;Confirmation
                                                </th>
                                                <th>
                                                    &nbsp;Comments
                                                </th>
                                                <th>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.studentPreviousApp)
                                            {
                                                <tr>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Branch.Branch_Name)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.AppDateTime)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Confirmation)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Comments)
                                                    </td>
                                                    <td>
                                                        @Html.ActionLink("Details", "Details", new { id = item.Appointment_Id })
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


@*<div class="row-fluid">
    <div class="span12">        
        <div class="nonboxy-widget">
          <div class="widget-head">
            <h5><i class="color-icons  application_cascade_co"></i> Outstanding Applications </h5>
          </div>
          <div class="widget-content">
            <div class="widget-box">
                <table class="my-data-tbl-boxy table">
                        <thead>
                            
                            <tr>
                                        <th>
                                            <i class="color-icons user_business_co"></i>Student Name
                                        </th>
                                        <th>
                                           <i class="color-icons day_calendar"></i> Date Of Application Status
                                        </th>
                                        <th>
                                            <i class="color-icons book_open_co"></i>Course Name
                                        </th>
                                        <th>
                                            <i class="color-icons zone_money_co"></i>Status
                                        </th>
                                        
                                        <th>
                                           <i class="color-icons money_co"></i> Payment
                                        </th>
                                    </tr>
                        </thead>
                        <tbody>
                                 @foreach (var item in Model)
                                 {                                                          
                                   <tr>

                                    <td>
                                        <ul>
                                            
                                          <li><a class='tip-top ifName' title="View profile" href="@Url.Action("StudentProfile", "StudentCentre", new { id = @item.Student_Id })">@item.Student.Client.GivenName
                                              @item.Student.Client.LastName</a></li>
                                        </ul>
                                    </td>
                                       <td>
                                        <ul>
                                            <li>
                                             @Html.Encode(item.Date_Of_ApplicationStatus.ToShortDateString())
                                             </li>
                                         </ul>
                                         </td>

                                         
                                         <td>
                                             <ul>
                                            <li>@Html.DisplayFor(modelItem => item.Course.Course_Name)</li>
                                            </ul>
                                         </td>

                                         <td>
                                         <ul>
                                             <li>@Html.DisplayFor(modelItem => item.Status)</li>
                                          </ul>      
                                         </td>

                                         <td>
                                         <ul>
                                             <a href=@Url.Action("Create", "Payment", new { id = item.Application_Id })><i class='color-icons add_co tip-top' data-original-title= "Add Payment"></i></a>
                                                                                                                                                   
                                         </ul>
                                         </td>
                                     </tr>                                     
                                    }
                        </tbody>
                    </table>             
            </div>
          </div>
        </div>
    </div>
</div>    
*@                