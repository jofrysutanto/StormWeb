@model StormWeb.Models.LogOnModel
@{
    Layout = "";
    ViewBag.Title = "Forgot Password";
}
<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Storm Web - Forgot Password</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Admin Panel Template" />
    <meta name="author" content="Westilian: Kamrujaman Shohel" />
    <!-- styles -->
    <link href="@Url.Content("~/Content/css/bootstrap.css")" rel="stylesheet"/>
    <link href="@Url.Content("~/Content/css/bootstrap-responsive.css")" rel="stylesheet"/>
    <link href="@Url.Content("~/Content/css/jquery-ui-1.8.16.custom.css")" rel="stylesheet"/>
    <link href="@Url.Content("~/Content/css/jquery.jqplot.css")" rel="stylesheet"/>
    <link href="@Url.Content("~/Content/css/prettify.css")" rel="stylesheet"/>
    <link href="@Url.Content("~/Content/css/elfinder.min.css")" rel="stylesheet"/>
    <link href="@Url.Content("~/Content/css/elfinder.theme.css")" rel="stylesheet"/>
    <link href="@Url.Content("~/Content/css/jquery.pnotify.default.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/Content/css/use%20for%20pines%20style%20icons/jquery.pnotify.default.icons.css")"
        rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/css/styles.css")" rel="stylesheet"/>
    <link href="@Url.Content("~/Content/css/icons-sprite.css")" rel="stylesheet"/>
    <link id="themes" href="@Url.Content("~/Content/css/themes.css")" rel="stylesheet"/>
    <!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/css/ie/ie7.css")" />
<![endif]-->
    <!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/css/ie/ie8.css")" />
<![endif]-->
    <!--[if IE 9]>
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/css/ie/ie9.css")" />
<![endif]-->
    <!--fav and touch icons -->
    <link rel="shortcut icon" href="@Url.Content("~/Content/ico/favicon.ico")" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="@Url.Content("~/Content/ico/apple-touch-icon-144-precomposed.png")" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="@Url.Content("~/Content/ico/apple-touch-icon-114-precomposed.png")" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="@Url.Content("~/Content/ico/apple-touch-icon-72-precomposed.png")" />
    <link rel="apple-touch-icon-precomposed" href="@Url.Content("~/Content/ico/apple-touch-icon-57-precomposed.png")" />
    @{ Html.EnableClientValidation(); }
</head>
<body class="map_bg">
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container-fluid">
                <div class="branding">
                    <div class="logo">
                        <a href="#" class="btn btn-inverse">
                            <h5>
                                Storm Web</h5>
                        </a>
                    </div>
                </div>
                <ul class="nav pull-right">
                    <li><a href="@Url.Action("Page","Site")"><i class="icon-share-alt icon-white"></i>Go to Main Site</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- End of Header -->
    <!-- Main container -->
    <div class="login-container">
	<div class="well-login forgot-pass">
		<h3>Having trouble signing in?</h3>
		<p>
			Please enter your username or email address. You will receive a link to create a new password via email.
		</p>
		<div class="control-group">
			<div class="controls">
				<div>
					<input id="usernameOrEmail" type="text" placeholder="Username or Email" class="login-input user-name">
				</div>
			</div>
		</div>
		<div class="clearfix">
			<button id="submitReset" class="btn btn-inverse login-btn" data-loading-text="Please wait.." type="submit">Get Reset Password link</button>
		</div>
	</div>
</div>

<div id="successDialog" title="Success" style="display: none">
	<p>An email with link to reset your password is now sent to your email. If you can't find this email, please allow up to 15 minutes and re-check or check your <b>spam</b> folder.</p>
</div>

<div id="errorDialog" title="Error" style="display: none">
	<p>Reset request is unsuccessful, please check your username or email.</p>
</div>

    <!-- End of Main container -->
    <!-- javascript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="@Url.Content("~/Scripts/jquery.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.16.custom.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.ui.touch-punch.js")"></script>
    <script src="@Url.Content("~/Scripts/bootstrap.js")"></script>
    <script src="@Url.Content("~/Scripts/prettify.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.sparkline.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.nicescroll.min.js")"></script>
    <script src="@Url.Content("~/Scripts/accordion.jquery.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.smartWizard-2.0.js")"></script>
    <script src="@Url.Content("~/Scripts/vaidation.jquery.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery-dynamic-form.js")"></script>
    <script src="@Url.Content("~/Scripts/fullcalendar.js")"></script>
    <script src="@Url.Content("~/Scripts/raty.jquery.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.noty.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.cleditor.min.js")"></script>
    <script src="@Url.Content("~/Scripts/data-table.jquery.js")"></script>
    <script src="@Url.Content("~/Scripts/TableTools.min.js")"></script>
    <script src="@Url.Content("~/Scripts/ColVis.min.js")"></script>
    <script src="@Url.Content("~/Scripts/plupload.full.js")"></script>
    <script src="@Url.Content("~/Scripts/elfinder/elfinder.min.js")"></script>
    <script src="@Url.Content("~/Scripts/chosen.jquery.js")"></script>
    <script src="@Url.Content("~/Scripts/uniform.jquery.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.tagsinput.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.colorbox-min.js")"></script>
    <script src="@Url.Content("~/Scripts/check-all.jquery.js")"></script>
    <script src="@Url.Content("~/Scripts/inputmask.jquery.js")"></script>
    <script src="http://bp.yahooapis.com/2.4.21/browserplus-min.js"></script>
    <script src="@Url.Content("~/Scripts/plupupload/jquery.plupload.queue/jquery.plupload.queue.js")"></script>
    <script src="@Url.Content("~/Scripts/excanvas.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.jqplot.min.js")"></script>
    <script src="@Url.Content("~/Scripts/chart/jqplot.highlighter.min.js")"></script>
    <script src="@Url.Content("~/Scripts/chart/jqplot.cursor.min.js")"></script>
    <script src="@Url.Content("~/Scripts/chart/jqplot.dateAxisRenderer.min.js")"></script>
    <script src="@Url.Content("~/Scripts/custom-script.js")"></script>
    <!-- html5.js for IE less than 9 -->
    <!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
    <!-- css3-mediaqueries.js for IE less than 9 -->
    <!--[if lt IE 9]>
	<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
<![endif]-->
    <script src="@Url.Content("~/Scripts/ios-orientationchange-fix.js")"></script>

    
<script type="text/javascript">
@if (ViewBag.NotifyRegistrationSuccess != null)
{
    @:$(function () {
    @:var noty_id = noty({
			@:layout : 'top',
			@:text: "Registration successfull. You can now login with your account",
			@:type:'success',
			
			 @:});
		  @:});
}

</script>

<script>
    $(function () {
        $( "#successDialog" ).dialog({
            autoOpen: false,
			modal: true,
			buttons: {
				Ok: function() {
					$( this ).dialog( "close" );
                    window.location = "@Url.Action("LogOn", "Account")";
				}
			}
		});

        $( "#errorDialog" ).dialog({
            autoOpen: false,
			modal: true,
			buttons: {
				Ok: function() {
					$( this ).dialog( "close" );
				}
			}
		});

        // Calling ajax request to submit
        $('#submitReset').click(function () {
            var selected = $(this);
            selected.button('loading');
            $.ajax({
                type: 'POST',
                url: '@Url.Action("ForgotPassword", "Account")',
                dataType: "json",
                data: ({
                    usernameOrEmail: $("#usernameOrEmail").val()
                }),
                success: function (data) {
                    //alert('Check your email and click on the link that will reset your password!'); 
                    $( "#successDialog" ).dialog( "open" );                 
                },
                error: function () {
                    //alert('Failed to reset password, check your username or email!');
                    $( "#errorDialog" ).dialog( "open" );  
                    selected.button('reset');
                }
            });
        });
    });
</script>
</body>
</html>
